C51 COMPILER V9.00   SSD1306                                                               06/14/2017 19:17:10 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE SSD1306
OBJECT MODULE PLACED IN ssd1306.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE ssd1306.c OPTIMIZE(6,SPEED) DEBUG OBJECTEXTEND

line level    source

   1          #include "Fx2.h"
   2          #include "fx2regs.h"
   3          
   4          #include "stdlib.h"
   5          #include "string.h"
   6          
   7          #include "iic_comm.h"
   8          
   9          #include "ssd1306.h"
  10                  
  11          const code au8Font8x8[]= {
  12              0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,       // ASCII -  32
  13              0x00,0x00,0x00,0x5F,0x5F,0x00,0x00,0x00,       // ASCII -  33
  14              0x00,0x00,0x03,0x07,0x00,0x07,0x03,0x00,       // ASCII -  34
  15              0x00,0x10,0x74,0x1C,0x77,0x1C,0x17,0x04,       // ASCII -  35
  16              0x00,0x24,0x2E,0x2A,0x7F,0x2A,0x3A,0x10,       // ASCII -  36
  17              0x00,0x4C,0x6A,0x76,0x1A,0x6A,0x56,0x33,       // ASCII -  37
  18              0x00,0x30,0x7A,0x4F,0x5D,0x37,0x7A,0x48,       // ASCII -  38
  19              0x00,0x00,0x04,0x07,0x03,0x00,0x00,0x00,       // ASCII -  39
  20              0x00,0x00,0x00,0x1C,0x3E,0x63,0x41,0x00,       // ASCII -  40
  21              0x00,0x00,0x41,0x63,0x3E,0x1C,0x00,0x00,       // ASCII -  41
  22              0x00,0x08,0x2A,0x3E,0x1C,0x3E,0x2A,0x08,       // ASCII -  42
  23              0x00,0x08,0x08,0x3E,0x3E,0x08,0x08,0x00,       // ASCII -  43
  24              0x00,0x00,0x00,0x60,0x60,0x00,0x00,0x00,       // ASCII -  44
  25              0x00,0x08,0x08,0x08,0x08,0x08,0x08,0x00,       // ASCII -  45
  26              0x00,0x00,0x00,0x60,0x60,0x00,0x00,0x00,       // ASCII -  46
  27              0x00,0x60,0x30,0x18,0x0C,0x06,0x03,0x01,       // ASCII -  47
  28              0x00,0x1C,0x3E,0x61,0x43,0x3E,0x1C,0x00,       // ASCII -  48
  29              0x00,0x00,0x44,0x7F,0x7F,0x40,0x00,0x00,       // ASCII -  49
  30              0x00,0x46,0x67,0x71,0x59,0x4F,0x66,0x00,       // ASCII -  50
  31              0x00,0x22,0x63,0x49,0x4D,0x7F,0x32,0x00,       // ASCII -  51
  32              0x00,0x18,0x1C,0x52,0x7F,0x7F,0x50,0x00,       // ASCII -  52
  33              0x00,0x2F,0x6F,0x45,0x45,0x7D,0x39,0x00,       // ASCII -  53
  34              0x00,0x3C,0x7E,0x4B,0x49,0x79,0x30,0x00,       // ASCII -  54
  35              0x00,0x07,0x43,0x71,0x7D,0x0F,0x03,0x00,       // ASCII -  55
  36              0x00,0x36,0x7F,0x4D,0x59,0x7F,0x36,0x00,       // ASCII -  56
  37              0x00,0x06,0x4F,0x49,0x69,0x3F,0x1E,0x00,       // ASCII -  57
  38              0x00,0x00,0x00,0x66,0x66,0x00,0x00,0x00,       // ASCII -  58
  39              0x00,0x00,0x00,0x66,0x66,0x00,0x00,0x00,       // ASCII -  59
  40              0x00,0x00,0x08,0x1C,0x36,0x63,0x41,0x00,       // ASCII -  60
  41              0x00,0x14,0x14,0x14,0x14,0x14,0x14,0x00,       // ASCII -  61
  42              0x00,0x00,0x41,0x63,0x36,0x1C,0x08,0x00,       // ASCII -  62
  43              0x00,0x02,0x07,0x51,0x59,0x0F,0x06,0x00,       // ASCII -  63
  44              0x00,0x3E,0x41,0x5D,0x55,0x5D,0x51,0x1E,       // ASCII -  64
  45              0x00,0x40,0x70,0x1D,0x17,0x1F,0x78,0x60,       // ASCII -  65
  46              0x00,0x41,0x7F,0x7F,0x49,0x4F,0x7E,0x30,       // ASCII -  66
  47              0x00,0x1C,0x3E,0x63,0x41,0x41,0x42,0x27,       // ASCII -  67
  48              0x00,0x41,0x7F,0x7F,0x41,0x63,0x3E,0x1C,       // ASCII -  68
  49              0x00,0x41,0x7F,0x7F,0x49,0x5D,0x41,0x63,       // ASCII -  69
  50              0x00,0x41,0x7F,0x7F,0x49,0x1D,0x01,0x03,       // ASCII -  70
  51              0x00,0x1C,0x3E,0x63,0x41,0x51,0x72,0x77,       // ASCII -  71
  52              0x00,0x7F,0x7F,0x08,0x08,0x7F,0x7F,0x00,       // ASCII -  72
  53              0x00,0x00,0x41,0x7F,0x7F,0x41,0x00,0x00,       // ASCII -  73
  54              0x00,0x30,0x70,0x41,0x41,0x7F,0x3F,0x01,       // ASCII -  74
  55              0x00,0x7F,0x7F,0x08,0x1C,0x77,0x63,0x41,       // ASCII -  75
C51 COMPILER V9.00   SSD1306                                                               06/14/2017 19:17:10 PAGE 2   

  56              0x00,0x41,0x7F,0x7F,0x41,0x40,0x60,0x70,       // ASCII -  76
  57              0x00,0x7F,0x7E,0x0C,0x18,0x0C,0x7E,0x7F,       // ASCII -  77
  58              0x00,0x7F,0x7E,0x0C,0x18,0x30,0x7F,0x7F,       // ASCII -  78
  59              0x00,0x1C,0x3E,0x63,0x41,0x63,0x3E,0x1C,       // ASCII -  79
  60              0x00,0x41,0x7F,0x7F,0x49,0x09,0x0F,0x06,       // ASCII -  80
  61              0x00,0x1C,0x3E,0x63,0x51,0x63,0x3E,0x1C,       // ASCII -  81
  62              0x00,0x7F,0x7F,0x09,0x19,0x7F,0x66,0x40,       // ASCII -  82
  63              0x00,0x66,0x6F,0x4D,0x59,0x7B,0x33,0x00,       // ASCII -  83
  64              0x00,0x03,0x41,0x7F,0x7F,0x41,0x03,0x00,       // ASCII -  84
  65              0x00,0x3F,0x7F,0x40,0x40,0x40,0x7F,0x3F,       // ASCII -  85
  66              0x00,0x03,0x0F,0x3D,0x70,0x1D,0x07,0x01,       // ASCII -  86
  67              0x00,0x0F,0x7F,0x30,0x1C,0x30,0x7F,0x0F,       // ASCII -  87
  68              0x00,0x63,0x77,0x1C,0x1C,0x77,0x63,0x00,       // ASCII -  88
  69              0x01,0x03,0x47,0x7C,0x78,0x47,0x03,0x01,       // ASCII -  89
  70              0x00,0x67,0x73,0x59,0x4D,0x67,0x73,0x00,       // ASCII -  90
  71              0x00,0x00,0x00,0x7F,0x7F,0x41,0x41,0x00,       // ASCII -  91
  72              0x00,0x01,0x03,0x06,0x0C,0x18,0x30,0x60,       // ASCII -  92
  73              0x00,0x00,0x41,0x41,0x7F,0x7F,0x00,0x00,       // ASCII -  93
  74              0x00,0x00,0x04,0x06,0x03,0x06,0x04,0x00,       // ASCII -  94
  75              0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,       // ASCII -  95
  76              0x00,0x00,0x01,0x03,0x06,0x04,0x00,0x00,       // ASCII -  96
  77              0x00,0x68,0x6C,0x54,0x54,0x3C,0x78,0x40,       // ASCII -  97
  78              0x00,0x41,0x7F,0x3F,0x6C,0x44,0x7C,0x38,       // ASCII -  98
  79              0x00,0x38,0x7C,0x44,0x44,0x6C,0x2C,0x00,       // ASCII -  99
  80              0x00,0x38,0x7C,0x44,0x49,0x3F,0x7F,0x40,       // ASCII - 100
  81              0x00,0x38,0x7C,0x54,0x54,0x5C,0x58,0x00,       // ASCII - 101
  82              0x00,0x00,0x48,0x7E,0x7F,0x49,0x0B,0x02,       // ASCII - 102
  83              0x00,0x48,0x7C,0x34,0x34,0x2C,0x68,0x44,       // ASCII - 103
  84              0x00,0x41,0x7F,0x7F,0x08,0x04,0x7C,0x78,       // ASCII - 104
  85              0x00,0x00,0x44,0x7D,0x7D,0x40,0x00,0x00,       // ASCII - 105
  86              0x00,0x60,0x60,0x04,0x7D,0x7D,0x00,0x00,       // ASCII - 106
  87              0x00,0x41,0x7F,0x7F,0x10,0x78,0x6C,0x44,       // ASCII - 107
  88              0x00,0x00,0x41,0x7F,0x7F,0x40,0x00,0x00,       // ASCII - 108
  89              0x00,0x7C,0x7C,0x0C,0x78,0x0C,0x7C,0x78,       // ASCII - 109
  90              0x00,0x44,0x7C,0x7C,0x08,0x04,0x7C,0x78,       // ASCII - 110
  91              0x00,0x38,0x7C,0x44,0x44,0x7C,0x38,0x00,       // ASCII - 111
  92              0x00,0x04,0x7C,0x78,0x24,0x24,0x3C,0x18,       // ASCII - 112
  93              0x00,0x18,0x3C,0x24,0x24,0x78,0x7C,0x00,       // ASCII - 113
  94              0x00,0x44,0x7C,0x78,0x4C,0x04,0x1C,0x18,       // ASCII - 114
  95              0x00,0x48,0x5C,0x5C,0x74,0x74,0x24,0x00,       // ASCII - 115
  96              0x00,0x00,0x04,0x3E,0x7F,0x44,0x24,0x00,       // ASCII - 116
  97              0x00,0x3C,0x7C,0x40,0x40,0x3C,0x7C,0x40,       // ASCII - 117
  98              0x00,0x04,0x1C,0x3C,0x60,0x30,0x1C,0x04,       // ASCII - 118
  99              0x00,0x1C,0x7C,0x30,0x1C,0x30,0x7C,0x1C,       // ASCII - 119
 100              0x00,0x44,0x6C,0x3C,0x10,0x78,0x6C,0x44,       // ASCII - 120
 101              0x00,0x44,0x4C,0x1C,0x70,0x64,0x1C,0x0C,       // ASCII - 121
 102              0x00,0x4C,0x64,0x74,0x5C,0x4C,0x64,0x00,       // ASCII - 122
 103              0x00,0x08,0x08,0x3E,0x77,0x41,0x41,0x00,       // ASCII - 123
 104              0x00,0x00,0x00,0x7F,0x7F,0x00,0x00,0x00,       // ASCII - 124
 105              0x00,0x41,0x41,0x77,0x3E,0x08,0x08,0x00,       // ASCII - 125
 106              0x00,0x02,0x01,0x01,0x03,0x02,0x02,0x01,       // ASCII - 126
 107              0x00,0x60,0x78,0x4E,0x47,0x5E,0x78,0x60,       // ASCII - 127
 108              0x00,0x1C,0x3E,0x23,0x41,0x41,0x42,0x27,       // ASCII - 128
 109              0x00,0x3D,0x7D,0x40,0x41,0x3D,0x7C,0x40,       // ASCII - 129
 110          };                      
 111          /*       
 112          unsigned char code nBitmapDot[] =                  // Êý¾Ý±í
 113          {
 114                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 115                0x00,0x00,0x00,0x00,0xC0,0xF0,0xFC,0xFC,
 116                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 117                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
C51 COMPILER V9.00   SSD1306                                                               06/14/2017 19:17:10 PAGE 3   

 118                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 119                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 120                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 121                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFC,0xFC,
 122                0xF8,0xF0,0xE0,0x80,0x00,0x00,0x00,0x00,
 123                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 124                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 125                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 126                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 127                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 128                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 129                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 130                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 131                0x00,0xE0,0xFC,0xFF,0xFF,0xFF,0xFF,0xFF,
 132                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 133                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 134                0xFF,0x7F,0x3F,0x3F,0x1F,0x0F,0x0F,0x07,
 135                0x07,0x03,0x03,0x03,0x07,0x0F,0x0F,0x1F,
 136                0xBF,0x3F,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 137                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 138                0xFF,0xFF,0xFF,0xFF,0xF0,0xC0,0x00,0x00,
 139                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 140                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 141                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 142                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 143                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 144                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 145                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 146                0x00,0x00,0x00,0x00,0x00,0x00,0xE0,0xF8,
 147                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 148                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 149                0xFF,0xFF,0x7F,0x3F,0x1F,0x0F,0x03,0x01,
 150                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 151                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF9,
 152                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 153                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 154                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xF8,0x00,
 155                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 156                0x00,0x00,0x00,0x00,0x04,0x00,0x00,0x00,
 157                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 158                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 159                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 160                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 161                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 162                0x00,0x00,0x00,0xF0,0xFC,0xFF,0xFF,0xFF,
 163                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 164                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x7F,0x7F,
 165                0x73,0x71,0x60,0x60,0x60,0xE0,0xC0,0xC0,
 166                0xC0,0xE0,0xE0,0xE0,0xB0,0xB0,0xD6,0xDE,
 167                0xDE,0xFE,0xFE,0xFE,0xFE,0xFE,0xFE,0xFF,
 168                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 169                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 170                0xFF,0xFE,0xFB,0xFF,0xFF,0xFF,0xFF,0xFC,
 171                0xE0,0x40,0x00,0x00,0x00,0x00,0x00,0x00,
 172                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 173                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 174                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 175                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 176                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 177                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 178                0x00,0x00,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 179                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
C51 COMPILER V9.00   SSD1306                                                               06/14/2017 19:17:10 PAGE 4   

 180                0xFF,0xFF,0x07,0x07,0x0F,0x0F,0x00,0x00,
 181                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 182                0x01,0x3F,0x7F,0x80,0x03,0x19,0x79,0xF9,
 183                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 184                0xFF,0x7B,0x3F,0x1F,0x1F,0x7F,0xFF,0xFF,
 185                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 186                0xFF,0xFF,0xFF,0xFF,0xF8,0xE8,0xFE,0x07,
 187                0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 188                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 189                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 190                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 191                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 192                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 193                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 194                0xFC,0xFC,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 195                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 196                0xFF,0xF3,0xF0,0xF0,0xC0,0x00,0x00,0x00,
 197                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 198                0x00,0x00,0x00,0x00,0x81,0xC3,0xE7,0xF7,
 199                0xF7,0xFF,0xFF,0x7F,0x7F,0x3F,0x03,0x23,
 200                0x20,0x20,0x20,0xE0,0x80,0xF0,0xFF,0xFF,
 201                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 202                0xFF,0xFF,0xFF,0xFF,0xFF,0x3F,0x0F,0x00,
 203                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 204                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 205                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 206                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 207                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 208                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 209                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 210                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 211                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 212                0xFF,0xFF,0xFF,0xFF,0xFF,0xFC,0xE0,0x00,
 213                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 214                0x00,0x00,0x00,0x00,0x3F,0xFF,0xFF,0xFF,
 215                0x3B,0x39,0x68,0x48,0x48,0x88,0xCC,0x8C,
 216                0x8C,0x9C,0x8E,0xCF,0xDF,0xCF,0xCF,0xFF,
 217                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 218                0xFF,0xFF,0xFF,0x1F,0x07,0x00,0x00,0x00,
 219                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 220                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 221                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 222                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 223                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 224                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 225                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 226                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 227                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 228                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 229                0xFE,0xFC,0xF8,0xF0,0xE0,0xE0,0xC0,0xC0,
 230                0x80,0x80,0x80,0x80,0x80,0x83,0x83,0x03,
 231                0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x02,
 232                0x87,0x9F,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
 233                0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x3F,0x0F,
 234                0x07,0x03,0x00,0x00,0x00,0x00,0x00,0x00,
 235                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 236                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 237                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 238                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 239                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 240                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 241                0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
C51 COMPILER V9.00   SSD1306                                                               06/14/2017 19:17:10 PAGE 5   

 242          };
 243          
 244                     */
 245                          
 246          unsigned char* m_pFramebuffer;
 247          
 248          void writeCommand(unsigned char cmd)
 249          {
 250   1              I2CStart();
 251   1              I2CSend(0x78);  //Slave address,SA0=0
 252   1              I2CSend(0x00);  //write command
 253   1              I2CSend(cmd);
 254   1              I2CStop();
 255   1      }          
 256          
 257          void writeData(unsigned char cmd)
 258          {
 259   1              I2CStart();
 260   1              I2CSend(0x78);  //Slave address,SA0=0
 261   1              I2CSend(0x40);  //write data
 262   1              I2CSend(cmd);
 263   1              I2CStop();
 264   1      }
 265          void ssd1306_initalize()
 266          {
 267   1      
 268   1              //m_pFramebuffer = (unsigned char*)malloc(SSD1306_FBSIZE);
 269   1              //if(m_pFramebuffer == 0){
 270   1              //      return;
 271   1              //}
 272   1              //memset(m_pFramebuffer,0,SSD1306_FBSIZE);//clear it.
 273   1              //write command to the screen registers.
 274   1              writeCommand(SSD1306_CMD_DISPLAY_OFF);//0xAE
 275   1              writeCommand(0xD5);//Set Memory Addressing Mode
 276   1              writeCommand(0x80);//00,Horizontal Addressing Mode;01,Vertical Addressing Mode;10,Page Addressing Mode (R
             -ESET);11,Invalid
 277   1              writeCommand(0xA8);//Set Page Start Address for Page Addressing Mode,0-7
 278   1              writeCommand(0x3F);//--set segment re-map 0 to 127
 279   1              writeCommand(0xD3);//--set multiplex ratio(1 to 64)
 280   1              writeCommand(0x00);//
 281   1              writeCommand(0x40);//0xa4,Output follows RAM content;0xa5,Output ignores RAM content
 282   1              writeCommand(0x8D);//-set display offset
 283   1              writeCommand(0x14);//-not offset
 284   1              writeCommand(0x20);//--set display clock divide ratio/oscillator frequency
 285   1              writeCommand(0x00);//--set divide ratio
 286   1              writeCommand(0xA1);//--set pre-charge period
 287   1              writeCommand(0xC8);//
 288   1              writeCommand(0xDA);//--set com pins hardware configuration
 289   1              writeCommand(0x12);//--set vcomh
 290   1              writeCommand(0x81);//0x20,0.77xVcc
 291   1              writeCommand(0xCF);//--set DC-DC enable
 292   1              writeCommand(0xD9);
 293   1              writeCommand(0xF1);
 294   1              writeCommand(0xDB);
 295   1              writeCommand(0x40);
 296   1              writeCommand(0xA4);
 297   1              writeCommand(0xA6);
 298   1              writeCommand(SSD1306_CMD_DISPLAY_ON);//--0XAF
 299   1      
 300   1              //delay(10);//wait for the screen loaded.
 301   1      }
 302          
C51 COMPILER V9.00   SSD1306                                                               06/14/2017 19:17:10 PAGE 6   

 303          void ssd1306_clear()
 304          {
 305   1              int i;
 306   1      
 307   1              writeCommand(SSD1306_SETLOWCOLUMN | 0x0);  // low col = 0
 308   1          writeCommand(SSD1306_SETHIGHCOLUMN | 0x0);  // hi col = 0
 309   1          writeCommand(SSD1306_SETSTARTLINE | 0x0); // line #0
 310   1              writeCommand(0xb0);
 311   1              
 312   1          for (i=0; i<1024; i++) 
 313   1          {
 314   2            writeData(0x00);
 315   2          }
 316   1      }
 317                           
 318          void ssd1306_printchar(unsigned char dat)
 319          {
 320   1              unsigned char i;
 321   1              for (i=0; i<8; i++) 
 322   1          {
 323   2            writeData(au8Font8x8[(dat-32)*8+i]);
 324   2          }
 325   1      }
 326          
 327          void ssd1306_draw()
 328          {
 329   1              int i,j;
 330   1      
 331   1              writeCommand(SSD1306_SETLOWCOLUMN | 0x0);  // low col = 0
 332   1          writeCommand(SSD1306_SETHIGHCOLUMN | 0x0);  // hi col = 0
 333   1          writeCommand(SSD1306_SETSTARTLINE | 0x0); // line #0
 334   1      
 335   1              for (i=0;i<1024;i++) ;
 336   1              //writeData(~nBitmapDot[i]);      
 337   1      }
*** WARNING C280 IN LINE 329 OF SSD1306.C: 'j': unreferenced local variable
 338          
 339          void ssd1306_printf(unsigned char dat[])
 340          {
 341   1              int i=0;
 342   1              int j=0;
 343   1      
 344   1              writeCommand(SSD1306_SETLOWCOLUMN | 0x0);  // low col = 0
 345   1          writeCommand(SSD1306_SETHIGHCOLUMN | 0x0);  // hi col = 0
 346   1          writeCommand(SSD1306_SETSTARTLINE | 0x0); // line #0
 347   1              writeCommand(0xb0);
 348   1      
 349   1              for (i=0;i< strlen(dat);i++)
 350   1              {
 351   2                      if ((dat[i]==0x0d) ||(dat[i]==0x0a) || (dat[i]==0x0b))
 352   2                              for (j=0;j<8;j++)
 353   2                                      writeData(au8Font8x8[j]);
 354   2                      else    
 355   2                              for (j=0;j<8;j++)
 356   2                                      writeData(au8Font8x8[(dat[i]-32)*8+j]); 
 357   2              }
 358   1              for (i=0;i<1024-8*strlen(dat);i++)
 359   1                      writeData(0x00); 
 360   1      }
*** WARNING C316 IN LINE 360 OF ssd1306.c: unterminated conditionals


C51 COMPILER V9.00   SSD1306                                                               06/14/2017 19:17:10 PAGE 7   

MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    611    ----
   CONSTANT SIZE    =   1568    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      3      15
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  2 WARNING(S),  0 ERROR(S)
